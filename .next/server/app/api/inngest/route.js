(()=>{var e={};e.id=730,e.ids=[730],e.modules={1708:e=>{"use strict";e.exports=require("node:process")},10548:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>S,routeModule:()=>x,serverHooks:()=>b,workAsyncStorage:()=>v,workUnitAsyncStorage:()=>q});var s={};r.r(s),r.d(s,{GET:()=>g,POST:()=>f,PUT:()=>w});var n=r(96559),a=r(48088),i=r(37719),o=r(64899),u=r(55220),l=r(34380),d=r(94634),c=r(47565),p=r(71763);let y=u.V.createFunction({id:"create-user"},{event:"user.create"},async({event:e,step:t})=>{let{user:r}=e.data;if(!r)throw Error("No user data found in event.");let s=r.fullName??"Anonymous",n=r.primaryEmailAddress?.emailAddress??"no-email@example.com";return{status:"success",data:await t.run("Check user and create new if not in DB",async()=>{let e=await l.A.select().from(c.J0).where((0,d.eq)(c.J0.email,n));return 0===e.length?await l.A.insert(c.J0).values({name:s,email:n,isMember:!1}).returning({id:c.J0.id}):e})}}),h=u.V.createFunction({id:"generate-course"},{event:"notes.generate"},async({event:e,step:t})=>{let{course:r}=e.data;return await t.run("Generate Chapter Notes",async()=>{let e=r?.courseLayout?.Chapters??[];for(let t=0;t<e.length;t++){let s=e[t],n=`
You are an expert educational content creator.
Generate detailed, clean, and interactive study notes for the given chapter in semantic HTML format.
Requirements:

Do NOT include html, head, or body tags. The content must be ready to embed inside an existing web page.

Structure:
Use a single h1 for the chapter and in BOLD and give margin from top and bottom.
Use h2 for main sections.
Use h3 for sub-sections if needed.
Add clear spacing between sections using proper semantic tags like section, div, or hr.

Headings:
All headings must be visually clear and bold by default (use proper heading tags).

Content:

Use p tags for clear, short paragraphs.
Use ul or ol for lists.
Highlight important keywords or phrases using strong or em.
Add blockquote for key takeaways or notable points.
Include tables whenever you explain comparisons, steps, or data.
If giving code examples, wrap them in pre and code tags inside a separate div with extra margin or padding for emphasis.
Add indexing where appropriate: for example, numbered lists for steps.

Presentation:
Keep the HTML clean and readable.
Ensure the content is easy to render responsively.
Avoid inline styles; use semantic HTML only.
Write clear, concise explanations for each concept and example.
Write in a simple, clear teaching style suitable for students.



Chapter to generate:
${JSON.stringify(s,null,2)}
`,a=await p.C5.models.generateContent({model:"gemini-2.0-flash-lite",contents:[{role:"user",parts:[{text:n}]}]}),i=a?.candidates?.[0]?.content?.parts?.[0]?.text??"";await l.A.insert(c.fU).values({chapterId:`${t}`,courseId:r?.courseId,notes:i})}}),await t.run("Update Course Status to 'Ready'",async()=>{console.log("Status update result:",await l.A.update(c.rJ).set({status:"Ready"}).where((0,d.eq)(c.rJ.courseId,r?.courseId)))}),"âœ… Notes generation complete, course marked as Ready!"}),m=u.V.createFunction({id:"Generate Study Content"},{event:"studyType.content"},async({event:e,step:t})=>{let{studyType:r,prompt:s,courseId:n}=e.data,a=await t.run("Generating Study Content using AI",async()=>{let e,t;"flashCard"===r?e=await p.$s.models.generateContent({model:"gemini-2.0-flash-lite",contents:[{role:"user",parts:[{text:s}]}]}):"quiz"===r?e=await p.uv.models.generateContent({model:"gemini-2.0-flash-lite",contents:[{role:"user",parts:[{text:s}]}]}):"qa"===r&&(e=await p.xJ.models.generateContent({model:"gemini-2.0-flash-lite",contents:[{role:"user",parts:[{text:s}]}]})),console.log("AI raw result:",JSON.stringify(e,null,2));let n=e?.candidates?.[0]?.content?.parts?.[0]?.text;if(!n)throw Error("Gemini did not return any text.");let a=n?.replace(/```json/gi,"").replace(/```/g,"").trim();if(!a||"null"===a)throw Error("Gemini response was null or empty.");try{t=JSON.parse(a)}catch(e){throw console.error("JSON parsing failed:",a),e}return console.log("Parsed AIRESULT:",t),t});return{status:"ok",saved:await t.run("Save Result to DB",async()=>await l.A.update(c.SX).set({content:a,status:"Ready"}).where((0,d.eq)(c.SX.courseId,n)).where((0,d.eq)(c.SX.type,r)))}}),{GET:g,POST:f,PUT:w}=(0,o.wX)({client:u.V,functions:[y,h,m]}),x=new n.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/inngest/route",pathname:"/api/inngest",filename:"route",bundlePath:"app/api/inngest/route"},resolvedPagePath:"C:\\Users\\Vinayak\\Desktop\\Full_Stack_Projects\\prep-ai\\app\\api\\inngest\\route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:v,workUnitAsyncStorage:q,serverHooks:b}=x;function S(){return(0,i.patchFetch)({workAsyncStorage:v,workUnitAsyncStorage:q})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},11997:e=>{"use strict";e.exports=require("punycode")},12412:e=>{"use strict";e.exports=require("assert")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34380:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71633).fd)("postgresql://Prep-AI-Smart-Study-Material_owner:npg_5feuEw7bZcHU@ep-tight-rain-a1p8nyrb-pooler.ap-southeast-1.aws.neon.tech/Prep-AI-Smart-Study-Material?sslmode=require")},34631:e=>{"use strict";e.exports=require("tls")},39727:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},47565:(e,t,r)=>{"use strict";r.d(t,{J0:()=>d,SX:()=>y,fU:()=>p,rJ:()=>c});var s=r(96017),n=r(61546),a=r(50033),i=r(79252),o=r(54693),u=r(34359),l=r(29334);let d=(0,n.cJ)("users",{id:(0,a.vX)().primaryKey(),name:(0,i.yf)().notNull(),email:(0,i.yf)().notNull(),isMember:(0,o.zM)().notNull().default(!1)}),c=(0,n.cJ)("studymaterial",{id:(0,a.vX)().primaryKey(),courseId:(0,i.yf)().notNull(),courseType:(0,i.yf)().notNull(),topic:(0,i.yf)().notNull(),difficultyLevel:(0,i.yf)().default("Easy"),courseLayout:(0,u.Pq)().$default("Nothing"),createdBy:(0,i.yf)().notNull(),status:(0,i.yf)().default("Generating")}),p=(0,n.cJ)("chapterNotes",{id:(0,a.vX)().primaryKey(),courseId:(0,i.yf)().notNull(),chapterId:(0,s.nd)().notNull(),notes:(0,l.Qq)()}),y=(0,n.cJ)("studyTypeContent",{id:(0,a.vX)().primaryKey(),courseId:(0,i.yf)().notNull(),content:(0,u.Pq)(),type:(0,i.yf)().notNull(),status:(0,i.yf)().default("Generating")})},47990:()=>{},55220:(e,t,r)=>{"use strict";r.d(t,{V:()=>s});let s=new(r(52880)).Inngest({id:"prepAI",eventKey:"pqEjIXTRCBm6Xvh6IRW0SOSLN0oBPdShtxSm4tHBGoggFjlREzXY89BkJM9NGf7VBDGtwsCzoP6qEBL_F7K8_Q",signingKey:"signkey-prod-07c3c54f5880c5b170cf2985e5ca7736151509931490b81b6646abef4c1adbe3"})},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64899:(e,t,r)=>{"use strict";t.wX=t.U7=void 0;let s=r(82813),n=r(63477);t.U7="nextjs";let a=e=>"object"==typeof e&&null!==e,i=e=>"function"==typeof e,o=e=>a(e)&&i(e.setHeader)&&i(e.status)&&i(e.send);t.wX=e=>{let r=new s.InngestCommHandler(Object.assign(Object.assign({frameworkName:t.U7},e),{handler:(t,...r)=>{let[s,a]=r,i=e=>{let t="function"==typeof s.headers.get?s.headers.get(e):s.headers[e];return Array.isArray(t)?t[0]:t};return{body:()=>"function"==typeof s.json?s.json():s.body,headers:i,method:()=>t||s.method||"",isProduction:()=>{try{return!0}catch(e){}},queryString:(e,t)=>{var r;let n=(null==(r=s.query)?void 0:r[e])||t.searchParams.get(e);return Array.isArray(n)?n[0]:n},url:()=>{let t;try{t=new URL(s.url)}catch(e){}if(t){let r=e.serveHost||i("host");if(r){let e=new URL(r.includes("://")?r:`${t.protocol}//${r}`);t.protocol=e.protocol,t.host=e.host,t.port=e.port,t.username=e.username,t.password=e.password}return t}let r=e.serveHost||i("host")||"";return new URL(s.url,`https://${r}`)},transformResponse:({body:e,headers:t,status:r})=>{if(o(a)){for(let[e,r]of Object.entries(t))a.setHeader(e,r);a.status(r),a.send(e);return}return new((0,n.getResponse)())(e,{status:r,headers:t})},transformStreamingResponse:({body:e,headers:t,status:r})=>new Response(e,{status:r,headers:t})}}})).createHandler(),a=r.bind(null,void 0);return Object.defineProperty(a,"length",{value:1}),Object.defineProperties(a,{GET:{value:r.bind(null,"GET")},POST:{value:r.bind(null,"POST")},PUT:{value:r.bind(null,"PUT")}})}},71763:(e,t,r)=>{"use strict";r.d(t,{$s:()=>i,C5:()=>a,L8:()=>n,uv:()=>o,xJ:()=>u});var s=r(81769);let n=new s.M4({apiKey:"AIzaSyChls2rKeiuswh6dCwzzs_5iE_YlOKtORU"}),a=new s.M4({apiKey:"AIzaSyChls2rKeiuswh6dCwzzs_5iE_YlOKtORU"}),i=new s.M4({apiKey:"AIzaSyChls2rKeiuswh6dCwzzs_5iE_YlOKtORU"}),o=new s.M4({apiKey:"AIzaSyChls2rKeiuswh6dCwzzs_5iE_YlOKtORU"}),u=new s.M4({apiKey:"AIzaSyChls2rKeiuswh6dCwzzs_5iE_YlOKtORU"})},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},78474:e=>{"use strict";e.exports=require("node:events")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},79748:e=>{"use strict";e.exports=require("fs/promises")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[719,199,880,769],()=>r(10548));module.exports=s})();